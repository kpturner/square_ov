generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  name      String
  email     String   @unique
  password  String
  createdAt DateTime @default(now())
  ovs       OV[]
}

model OV {
  id        Int       @id @default(autoincrement())
  name      String    @unique
  ovDate    DateTime
  createdAt DateTime  @default(now())
  userId    Int
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  officers  Officer[]

  @@index([userId], map: "OV_userId_fkey")
}

model Officer {
  id               Int      @id @default(autoincrement())
  name             String
  rank             String?
  provOfficerYear  Int?
  grandOfficer     Boolean
  grandOfficerYear Int?
  active           Boolean
  ovId             Int
  position         Position @default(automatic)
  grandActive      Boolean?
  grandRank        String?
  ov               OV       @relation(fields: [ovId], references: [id], onDelete: Cascade)

  @@index([ovId], map: "Officer_ovId_fkey")
}

enum Position {
  automatic
  head_of_south
  head_of_north
  sword_bearer
  standard_bearer
  vip
}
